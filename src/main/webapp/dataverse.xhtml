<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  
      xmlns:h="http://java.sun.com/jsf/html"  
      xmlns:f="http://java.sun.com/jsf/core"  
      xmlns:p="http://primefaces.org/ui">  

    <h:head>  
        <style type="text/css">
            .column1{width: 75%;height:auto}
            .column2{width: 25%;height:auto}
        </style>
    </h:head>  

    <h:body> 
        <f:metadata>
            <f:viewParam name="id" value="#{DataversePage.dataverse.id}"/>
            <f:viewParam name="ownerId" value="#{DataversePage.ownerId}"/>
            <f:viewAction action="#{DataversePage.init}" />
        </f:metadata>        

        <h:form id="dataverseForm">
            <p:panel  style="background-color: lightskyblue; height:80px;">                
                <h:outputLink value="/dataverse.xhtml?id=#{DataversePage.dataverse.owner.id}" rendered="#{!empty DataversePage.dataverse.owner}">
                    <h:outputText value="#{DataversePage.dataverse.owner.name}" rendered="#{!empty DataversePage.dataverse.owner}" />             
                </h:outputLink>  
                <h:outputText value=" > " rendered="#{!empty DataversePage.dataverse.owner}" />             

                <h:outputText value="#{DataversePage.dataverse.name} Dataverse" rendered="#{!DataversePage.editMode}" />    
                <p:panelGrid columns="2"  rendered="#{DataversePage.editMode}" >
                    <p:fieldset>
                        <p:inputText  id="name" value="#{DataversePage.dataverse.name}"/>
                        <p:outputLabel value=" Dataverse" for="name"/>
                        <p:watermark for="name" value="Enter name..." /> 
                    </p:fieldset>
                    <p:message for="name" /> 
                </p:panelGrid>
            </p:panel>

            <p:panel>
                <h:outputText value="[MESSAGE PANEL - VIEW]" rendered="#{!DataversePage.editMode}"/>
                <h:outputText value="[MESSAGE PANEL - EDIT]" rendered="#{DataversePage.editMode and DataversePage.dataverse.id != null}"/>
                <h:outputText value="[MESSAGE PANEL - CREATE]" rendered="#{DataversePage.editMode and DataversePage.dataverse.id == null}"/>
            </p:panel>            

            <p:panel>
                <p:panelGrid columns="2" columnClasses="column1,column2">
                    <p:panel>
                        <p:panelGrid columns="3">
                            <p:outputLabel value="Alias" for="alias" />
                            <h:outputText value="#{DataversePage.dataverse.alias}" rendered="#{!DataversePage.editMode}" />
                            <p:inputText  id="alias" value="#{DataversePage.dataverse.alias}" rendered="#{DataversePage.editMode}" />
                            <p:message for="alias" />  

                            <p:outputLabel value="Contact E-mail" for="contactEmail" />
                            <h:outputText value="#{DataversePage.dataverse.contactEmail}" rendered="#{!DataversePage.editMode}" />
                            <p:inputText  id="contactEmail" value="#{DataversePage.dataverse.contactEmail}" rendered="#{DataversePage.editMode}"/>
                            <p:message for="contactEmail" />

                            <p:outputLabel value="Affiliate" for="affiliation"/>
                            <h:outputText value="#{DataversePage.dataverse.affiliation}" rendered="#{!DataversePage.editMode}" />
                            <p:inputText  id="affiliation" value="#{DataversePage.dataverse.affiliation}" rendered="#{DataversePage.editMode}"/>
                            <p:message for="affiliation" />

                        </p:panelGrid> 
                    </p:panel>

                    <p:panel>
                        <p:menuButton value="Edit Dataverse" rendered="#{!DataversePage.editMode}" iconPos="right"> 
                            <p:menuitem value="Edit Info" actionListener="#{DataversePage.edit}" update="@all" />
                            <p:menuitem value="Edit Theme" disabled="true"/>  
                            <p:menuitem value="Edit Permissions" disabled="true"/>
                        </p:menuButton>  
                        <p:commandButton value="Save" actionListener="#{DataversePage.save}" update="@all"  rendered="#{DataversePage.editMode}" />

                        <p:commandButton value="Cancel" actionListener="#{DataversePage.cancel}" process="@this" update="@all"  rendered="#{DataversePage.editMode and DataversePage.dataverse.id != null}" />
                        <p:button value="Cancel" outcome="/dataverse.xhtml?id=#{DataversePage.ownerId}"  rendered="#{DataversePage.editMode and DataversePage.dataverse.id == null and DataversePage.ownerId != null}" />
                        <p:button value="Cancel" outcome="/dataverses.xhtml"  rendered="#{DataversePage.editMode and DataversePage.dataverse.id == null and DataversePage.ownerId == null}" />
                    </p:panel>
                </p:panelGrid>
            </p:panel>

            <p:panel>
                <h:outputText value="#{DataversePage.dataverse.description}" rendered="#{!DataversePage.editMode}" />
                <p:panelGrid columns="3"  rendered="#{DataversePage.editMode}">
                    <p:outputLabel value="Description" for="description"/>
                    <p:inputTextarea  id="description" value="#{DataversePage.dataverse.description}"
                                      rows="5" cols="30" counter="counter" maxlength="1000"       
                                      counterTemplate="{0} characters remaining." autoResize="false"/>
                    <h:outputText id="counter" /> 
                </p:panelGrid>
            </p:panel>            
        </h:form>

        <p:panel rendered="#{!DataversePage.editMode}">
            <p:panelGrid columns="2" columnClasses="column1,column2" >
                <p:panel>
                    <h:form id="searchForm">
                        <p:inputText id="search" />
                        <p:watermark for="search" value="Search this dataverse"/>
                        <p:commandButton value="Go" />
                    </h:form>
                </p:panel>

                <p:panel>
                    <h:form id="shareForm">
                        <p:menuButton value="Share Data" iconPos="right"> 
                            <p:menuitem value="Upload Dataset" disabled="true"/>
                            <p:menuitem value="Link to Existing Dataset" disabled="true"/>
                            <p:menuitem value="Create Dataverse" url="/dataverse.xhtml?ownerId=#{DataversePage.dataverse.id}"/>  
                            <p:menuitem value="Link to Existing Dataverse" disabled="true"/> 
                            <p:menuitem value="Create Query" disabled="true"/>                             
                        </p:menuButton>  
                    </h:form>
                </p:panel>
            </p:panelGrid>
        </p:panel>            

        <p:panel rendered="#{!DataversePage.editMode}">
            <p:dataList value="#{dataverseServiceBean.findByOwnerId(DataversePage.dataverse.id)}" var="dv">
                <h:outputLink value="/dataverse.xhtml?id=#{dv.id}">
                    <h:outputText value="#{dv.name}"/>
                    <h:outputText value=" (#{dv.affiliation})" rendered="#{!empty dv.affiliation}" />
                </h:outputLink>
            </p:dataList>
        </p:panel>

    </h:body> 
</html> 