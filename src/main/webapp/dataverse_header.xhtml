<div xmlns="http://www.w3.org/1999/xhtml"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:p="http://primefaces.org/ui">

    <!-- Header Panel -->
    <p:panel style="background-color: lightskyblue; height:70px;">
        <p:panelGrid styleClass="panelgridHeaderTable" columns="2">
            <ui:fragment>
                <h:outputLink value="/dataverse.xhtml?id=#{dataverse.id}" rendered="#{dataverse.id != null}">
                    <h:outputText id="nameOutput" value="#{dataverse.name} Dataverse" style="font-size:1.5em;font-weight:bold; padding:4px 0 4px 34px; background: url(/resources/images/icon_dataverse.png) no-repeat 0 50%;"/>
                </h:outputLink>

                <h:outputText value="New Dataverse" style="font-size:1.5em;font-weight:bold;" rendered="#{dataverse.id == null and ownerId != null}"/>

                <h:outputText value="Welcome to the Dataverse Network" style="font-size:1.5em;font-weight:bold;" rendered="#{dataverse.id == null and ownerId == null}"/>
            </ui:fragment>
            <ui:fragment>
                <p:panelGrid columns="2">
                    <ui:fragment>
                        <h:outputLink value="/dataverseuser.xhtml?editMode=CREATE" rendered="#{empty dataverseSession.user}">
                            Create Account
                        </h:outputLink>
                        <h:outputLink value="/dataverseuser.xhtml?editMode=INFO" rendered="#{!empty dataverseSession.user}">
                            <h:outputText value="#{dataverseSession.user.firstName} #{dataverseSession.user.lastName}" />
                        </h:outputLink>
                        <span style="margin-left: 5px; font-size:10pt">
                            <h:outputLink value="loginpage.xhtml">
                                (not you?)
                            </h:outputLink>
                        </span>
                    </ui:fragment>
                    <ui:fragment>
                        <h:outputLink value="/loginpage.xhtml" rendered="#{empty dataverseSession.user}">
                            Log In
                        </h:outputLink>
                        <h:form id="headerForm">
                            <h:commandLink actionListener="#{dataverseSession.setUser(null)}" rendered="#{!empty dataverseSession.user}">
                                Log Out
                            </h:commandLink>   
                        </h:form>                            
                    </ui:fragment>
                </p:panelGrid>
            </ui:fragment>
        </p:panelGrid>
    </p:panel>

    
    <!-- Breadcrumbs Panel -->
    <p:panel styleClass="panelLayoutBlock breadcrumbNavBlock" rendered="#{showBreadcrumbs}">

        <ui:repeat value="#{dataverse.owners}" var="owner">
            <p:tree value="#{dataverseHeaderFragment.getDataverseTree(owner)}" var="node" dynamic="true" cache="true" id="tree">
            <p:treeNode>
                <h:outputLink value="/dataverse.xhtml?id=#{node.id}">
                    <h:outputText value="#{node.name} Dataverse" style="font-weight: #{dataverse.id == node.id ? 'bold' : 'normal'}"/>
                </h:outputLink>
            </p:treeNode>
            </p:tree>              
            <h:outputText value=" > "/>
        </ui:repeat>

        <p:tree value="#{dataverseHeaderFragment.getDataverseTree(dataverse)}" var="node" dynamic="true" cache="true" id="tree2">
            <p:treeNode>
                <h:outputText value="#{node.name}s Dataverse" style="font-weight:bold;" rendered="#{dataset == null and dataverse.id == node.id}"/> 
              <h:outputLink value="/dataverse.xhtml?id=#{node.id}" rendered="#{dataset != null or dataverse.id != node.id}">
                    <h:outputText value="#{node.name} Dataverse" style="font-weight: #{dataverse.id == node.id ? 'bold' : 'normal'}"/>
                </h:outputLink>
            </p:treeNode>
        </p:tree>   

        <ui:fragment rendered="#{!empty dataset.latestVersion.metadata.title}" >
            <h:outputText value=" > "/>
            <h:outputText value="#{dataset.latestVersion.metadata.title}" style="font-weight:bold;"/>
        </ui:fragment>
    </p:panel>    

    
    <!-- Message Panel -->
    <p:panel styleClass="panelLayoutTitleBlock" rendered="#{showMessagePanel}">
        <p:messages id="messages" showDetail="true" autoUpdate="true" closable="true"/>
    </p:panel>    

</div>