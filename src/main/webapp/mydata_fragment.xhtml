<ui:composition xmlns="http://www.w3.org/1999/xhtml"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:c="http://java.sun.com/jsp/jstl/core"
     xmlns:p="http://primefaces.org/ui"
     xmlns:o="http://omnifaces.org/ui"
     xmlns:jsf="http://xmlns.jcp.org/jsf">


    <div class="row" id="my_data_filter_column2">
        <div class="col-sm-6"  style="padding:10px 30px;">
            <input type="text" size="40" class="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all search-input" name="mydata_search_term" id="mydata_search_term" placeholder="Search this data..." />
            
            &#160; <a class="btn btn-sm btn-default" id="btn_find_my_data"><span class="glyphicon glyphicon-search"></span>Find </a>
            &#160; <a target="_self" href="/dataverse/root/search" >Advanced Search </a>
        </div>
        <ui:fragment rendered="#{MyDataPage.isSuperuser()}">
        <div class="col-sm-6 well">Superuser:) Enter a username:
            <input type="text" name="userIdentifier" id="userIdentifier" value="dataverseAdmin" />
        </div>
        </ui:fragment>
    </div>
<!-- start: panel --><div class="panel panel-default">
<!-- start: panel body --><div class="panel-body clearfix">
        
    
    <!-- start: row -->
    <div class="row">
        <!-- start filter column -->
        <div class="col-xs-3" id="my_data_filter_column">
            <!--form id="mydata_filter_form" name="mydata_filter_form"-->
            <input type="hidden" name="selected_page" id="selected_page" value="1" />
                       
            <!-- start dvobject checkboxes -->
            <div id="div_dvobject_types" style="font-size:110%;font-weight:bold;padding-bottom:10px;">
                <div xclass="checkbox">
                    <input name="dvobject_types" id="id_cbox_dv_dataverse" type="checkbox" value="Dataverse" checked="checked" />
                    <i class="icon-dataverse text-icon-inline"></i>
                    <label>
                        <a class="mydata_dvobject_label"><span class="facetTypeDataverse">Dataverses</span></a>
                    </label>
                    <span id="id_dataverses_count"></span>
                </div>
                <div xclass="checkbox">
                    <input name="dvobject_types" id="id_cbox_dv_dataset" type="checkbox" value="Dataset" checked="checked" />
                    <i class="icon-dataset text-icon-inline"></i>
                    <label>
                        <a class="mydata_dvobject_label"><span class="facetTypeDataset">Datasets</span></a>
                    </label>
                    <span id="id_datasets_count"></span>
                </div>
                <div xclass="checkbox">
                    <input name="dvobject_types" id="id_cbox_dv_file" type="checkbox" value="DataFile" />
                    <i class="icon-file text-icon-inline"></i>
                    <label>
                        <a class="mydata_dvobject_label"><span class="facetTypeFile">Files</span></a>
                    </label>
                    <span id="id_files_count"></span>
                </div>
            </div>
            <!-- end dvobject checkboxes -->
            <!-- start: publish states -->
            <b>Publication Status</b>
            <div id="div_published_states" style="padding:5px 0;">
                <ui:repeat value="#{MyDataPage.publishedStates}" var="pstate">
                    <div>
                        <input name="published_states" id="id_cbox_#{pstate.toLowerCase()}" type="checkbox" value="#{pstate}" checked="checked"  />
                        <label style="font-weight:normal; font-size:90%;">
                            &#160; <a class="mydata_pubstate_label">#{pstate}</a>
                            <span id="id_#{pstate.toLowerCase()}_count"></span>
                        </label>
                    </div>                
                </ui:repeat>
            </div>
            <!-- end: publish states -->
            <!-- start: role states -->
            <b>Roles</b>
            <ui:fragment rendered="#{MyDataPage.isSuperuser()}">
                <br /><small>(superuser: show all roles)</small>
            </ui:fragment>

            <div id="div_role_states" style="padding:5px 0;">
            <ui:repeat value="#{MyDataPage.roleInfoForCheckboxes}" var="roleInfoList">
                <div>
                    <input name="role_ids" id="id_cbox_#{roleInfoList[2]}" type="checkbox" value="#{roleInfoList[0]}" checked="checked" />
                    <label style="font-weight:normal; font-size:90%;">
                       &#160;  <a class="mydata_role_label">#{roleInfoList[1]}</a>
                    </label>
                </div>    
            </ui:repeat>
            </div>
           <!-- end: role states -->
             <!--/form>-->
            <div id="div-search-params" class="well" style="display:none;"></div>
        </div><!-- end: filter column -->
        <!-- start: workspace column -->
        <div class="col-xs-9">
            <div id="div-pagination" style="xheight:60px;"> </div>
            <hr />
            <!--<div id="div-test-json" class="well">(pagination)</div>-->
            <div id="div-result-message">workspace</div>
            <div id="div-card-results">(card results?)</div>
            <div id="div-more-cards-link" class="text-center" style="display:none;">
                <a id="lnk_add_more_cards" class="btn btn-primary btn-xs">View more results</a>
            </div> 
            
            
            <div id="div-json-results">workspace</div>
        </div>
        <!-- end: workspace column -->
              </div><!-- end row -->
    <script src="#{resource['js/nunjucks.js']}?version=#{systemConfig.getVersion()}"></script>
    <script> 
        <ui:remove>This variable is needed by mydata.js to make the ajax call</ui:remove>
        var RETRIEVE_DATA_API_PATH = '#{MyDataPage.retrieveDataFullAPIPath}';
    </script>
    <script src="#{resource['js/mydata.js']}?version=#{systemConfig.getVersion()}"></script>
    <script>            
          $(document).ready(function() {
             init_mydata_page(); // source: mydata.js
           });
    </script>
</div><!-- end panel body -->
</div><!-- ebd panel -->
</ui:composition>