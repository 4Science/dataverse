<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

  <h:head>

  </h:head>

  <h:body>
    <ui:composition template="/dataverse_template.xhtml">
      <ui:param name="pageTitle" value="Role/Permission Relationships - #{dataverseServiceBean.findRootDataverse().name} #{bundle.dataverse}"/>
      <ui:param name="showDataverseHeader" value="false"/>
      <ui:define name="body">
          <f:metadata>
                <ui:remove>
                    <f:viewParam name="id" value="#{DatasetPage.dataset.id}"/>
                    <f:viewParam name="ownerId" value="#{DatasetPage.ownerId}"/>
                    <f:viewParam name="version" value="#{DatasetPage.version}"/>
                    <f:viewParam name="versionId" value="#{DatasetPage.versionId}"/>
                    <f:viewParam name="persistentId" value="#{DatasetPage.persistentId}"/>
                </ui:remove>
                    <f:viewAction action="#{MyDataPage.init}" />
          </f:metadata>

    <!-- start: row -->
    <div class="row">
        <!-- start filter column -->
        <div class="col-md-3">
            <form id="mydata_filter_form" name="mydata_filter_form">
            <div>
    <!--label for="exampleInputEmail1">Email address</label-->
            <input type="text" class="form-control" name="mydata_search_term" id="mydata_search_term" placeholder="Search" />
            <input type="hidden" name="selected_page" id="selected_page" value="1" />
            <ui:fragment rendered="#{MyDataPage.isSuperuser()}"><p>superuser:)</p>
            <input type="text" name="userIdentifier" id="userIdentifier" value="dataverseAdmin" />
            </ui:fragment>
            </div>
            <hr />            
                       
            <!-- start dvobject checkboxes -->
            <div id="div_dvobject_types" style="font-size:110%;font-weight:bold;">
                <div class="checkbox"><label>
                    <input name="dvobject_types" id="id_cbox_dv_dataverse" type="checkbox" value="Dataverse" checked="checked" />
                    <i class="icon-dataverse text-icon-inline"></i>
                    <span class="facetTypeDataverse">Dataverses <span id="id_dataverses_count"></span></span>
                </label></div>
                <div class="checkbox"><label>
                    <input name="dvobject_types" id="id_cbox_dv_dataset" type="checkbox" value="Dataset" checked="checked" />
                    <i class="icon-dataset text-icon-inline"></i>
                    <span class="facetTypeDataset">Datasets <span id="id_datasets_count"></span></span>
                </label></div>
                <div class="checkbox"><label>
                    <input name="dvobject_types" id="id_cbox_dv_file" type="checkbox" value="DataFile" />
                    <i class="icon-file text-icon-inline"></i>
                        <span class="facetTypeFile">Files <span id="id_files_count"></span></span>
                </label></div>
            </div>
            <!-- end dvobject checkboxes -->
            <!-- start: publish states -->
            <b>Publication Status</b>
            <div id="div_published_states">
                <ui:repeat value="#{MyDataPage.publishedStates}" var="pstate">
                    <div class="checkbox"><label>
                        <input name="published_states" id="id_cbox_#{pstate.toLowerCase()}" type="checkbox" value="#{pstate}" checked="checked"  />
                        #{pstate}
                    </label></div>                
                </ui:repeat>
            </div>
            <!-- end: publish states -->
            <!-- start: role states -->
            <b>Roles</b>
            <div id="div_role_states">
            <ui:repeat value="#{MyDataPage.roleInfoForCheckboxes}" var="roleInfoList">
                <div class="checkbox"><label>
                    <input name="role_ids" id="id_cbox_#{roleInfoList[1].toLowerCase()}" type="checkbox" value="#{roleInfoList[0]}" checked="checked" />
                    #{roleInfoList[1]}
                </label></div>    
            </ui:repeat>
            </div>
           <!-- end: role states -->
             </form>
            <b>parms sent</b>
            <div id="div-search-params" class="well"></div>
        </div><!-- end: filter column -->
        <!-- start: workspace column -->
        <div class="col-md-9">
            <div id="div-pagination" style="height:60px;"> </div>
            <hr />
            <!--<div id="div-test-json" class="well">(pagination)</div>-->
            <div id="div-result-message">workspace</div>
            <div id="div-card-results">(card results?)</div>
            <div id="div-more-cards-link" class="text-center" style="display:none;">
                <a id="lnk_add_more_cards" href="javascript:search_add_more_cards();" class="btn btn-primary btn-xs">View more results</a>
            </div> 
            
            
            <div id="div-json-results">workspace</div>
        </div>
        <!-- end: workspace column -->
              </div><!-- end row -->
    <script src="#{resource['js/nunjucks.js']}?version=#{systemConfig.getVersion()}"></script>
    <script> 
        <ui:remove>This variable is needed by mydata.js to make the ajax call</ui:remove>
        var RETRIEVE_DATA_API_PATH = '#{MyDataPage.retrieveDataFullAPIPath}';
    </script>
    <script src="#{resource['js/mydata.js']}?version=#{systemConfig.getVersion()}"></script>
    <script>            
          $(document).ready(function() {
             init_mydata_page(); // source: mydata.js
           });
    </script>
</ui:define>
    </ui:composition>
  </h:body>
</html>
